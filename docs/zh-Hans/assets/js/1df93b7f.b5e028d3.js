"use strict";(self.webpackChunkapps_docs=self.webpackChunkapps_docs||[]).push([[583],{2726:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(396),i=r(2436),l=r(6047),s=r(4041),c=r(4441),a=r(8908),o=r(8420);const u=[{attritube:"id",type:"string",description:"The id of canvas DOM",default:"scratch-card"},{attritube:"width",type:"number",description:"The width of canvas DOM",default:null},{attritube:"height",type:"number",description:"The height of canvas DOM",default:null},{attritube:"available",type:"boolean",description:"If it's available to scratch",default:!0},{attritube:"finishTransition",type:"boolean",description:"If the transition is enabled when it's finished",default:!0},{attritube:"cover",type:"string",description:"Cover image of scratch card",default:null},{attritube:"threshold",type:"number",description:"Threshold to finish scratching automatically",default:.95},{attritube:"fadeDuration",type:"number",description:"Duration for cover fade out",default:1},{attritube:"scratchRadius",type:"number",description:"Radius while scratching",default:15},{attritube:"fillStyle",type:"number",description:"FillStyle under img",default:"#fff"},{attritube:"onFill",type:"() => void",description:"Callback when fillArea",default:null},{attritube:"onFinishStart",type:"() => void",description:"Callback when finish transition start",default:null},{attritube:"onFinish",type:"() => void",description:"Callback when scratching finished",default:null}];var d=r(1085);const h=function(){const{siteConfig:e}=(0,n.A)(),t="npm install @scratch/react",[r,i]=(0,s.useState)(!1),l=(0,s.useRef)();return(0,d.jsxs)("div",{className:"container flex flex-col items-center gap-6 py-12 pt-24",children:[(0,d.jsx)(c.A,{as:"h1",className:"text-primary main_title text-6xl",children:e.title}),(0,d.jsx)("p",{className:"text-2xl",children:e.tagline}),(0,d.jsx)(a.I,{isOpen:r,showArrow:!0,content:"Copied!",children:(0,d.jsx)(o.m,{className:"hover:text-primary cursor-pointer transition",size:"md",onClick:()=>{"clipboard"in navigator&&navigator.clipboard.writeText(t).then((()=>{i(!0),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{i(!1)}),1e3)}))},children:t})})]})},f={features:"features_zH1R"},x=[{title:(0,d.jsx)(d.Fragment,{children:"\ud83c\udf81 Easy to Use"}),description:(0,d.jsx)(d.Fragment,{children:"Use it with minimal configuration."})},{title:(0,d.jsx)(d.Fragment,{children:"\u2728 Focus on UX"}),description:(0,d.jsx)(d.Fragment,{children:"\u7ecf\u8fc7\u7cbe\u5fc3\u4f18\u5316\uff0c\u786e\u4fdd\u6bcf\u4e00\u6b21\u522e\u5361\u90fd\u5982\u4e1d\u822c\u987a\u6ed1\uff0c\u5e26\u7ed9\u7528\u6237\u524d\u6240\u672a\u6709\u7684\u4e92\u52a8\u4f53\u9a8c"})},{title:(0,d.jsx)(d.Fragment,{children:"\ud83c\udf89 \u529f\u80fd\u5b8c\u5907"}),description:(0,d.jsx)(d.Fragment,{children:"\u65e0\u8bba\u662f\u81ea\u5b9a\u4e49\u56fe\u6848\u3001\u522e\u5361\u6548\u679c\u8fd8\u662f\u4ea4\u4e92\u903b\u8f91\uff0cscratch card \u90fd\u80fd\u8f7b\u677e\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\uff0c\u529f\u80fd\u4e00\u5e94\u4ff1\u5168"})}];function m(e){let{title:t,description:r}=e;return(0,d.jsxs)("div",{className:"padding-horiz--md flex-1 text-center",children:[(0,d.jsx)(c.A,{as:"h3",className:"mb-2 text-xl",children:t}),(0,d.jsx)("p",{children:r})]})}function p(){return(0,d.jsx)("section",{className:f.features,children:(0,d.jsx)("div",{className:"container flex",children:x.map(((e,t)=>(0,d.jsx)(m,{...e},t)))})})}var v=r(7823),g=r(5295),w=r(9391),j=r(3871),y=e=>{let t=(0,s.useRef)(e);return t.current=e,t},b=(e,t,r)=>{let n=(t.y-r.y)/(t.x-r.x);return t.y+n*(e-t.x)},E=(0,s.forwardRef)(((e,t)=>{let{id:r="scratch-card",width:n,height:i,style:l,available:c=!0,threshold:a=.95,cover:o="",fillStyle:u="#fff",scratchRadius:d=15,fadeDuration:h=1,onFinishStart:f,onFinish:x,onFill:m,...p}=e,v=(0,s.useRef)(2),g=(0,s.useRef)({x:0,y:0,width:0,height:0,ratioWidth:0,ratioHeight:0,context:null}),w=(0,s.useRef)({x:null,y:null}),E=(0,s.useRef)(!1),N=(0,s.useRef)(!1),A=(0,s.useRef)(),C=y(c),R=(e,t,r)=>{if(!C.current)return;let n=v.current;e.globalCompositeOperation="destination-out",e.beginPath(),e.arc(t*n,r*n,d,0,2*Math.PI),e.fill()},S=()=>{let{context:e,ratioHeight:t,ratioWidth:r}=g.current;if(e&&(e.fillStyle=u,e.fillRect(0,0,r,t),o)){let n=(()=>{if(A.current)return A.current;let e=document.createElement("img");return e.src=o,e.crossOrigin="Anonymous",A.current=e,e})();"function"==typeof n.onload?e.drawImage(n,0,0,r,t):n.onload=()=>{e.drawImage(n,0,0,r,t)}}},F=()=>{let{context:e}=g.current;e&&(e.globalCompositeOperation="source-over",S(),E.current=!1,m?.())},L=(0,s.useRef)(-1),k=()=>{E.current||(E.current=!0,f?.(),new Promise((e=>{if(!window.requestAnimationFrame)return e();let{context:t}=g.current;if(!t)return e();let r=1,n=1/(60*h),i=j((()=>{if(!E.current)return cancelAnimationFrame(L.current);r-=n,t.save(),t.globalCompositeOperation="source-in",t.globalAlpha=r,S(),t.restore()}),16),l=()=>{if(r<=0)return e();i(),L.current=requestAnimationFrame(l)};l()})).finally(x))},T=y(k);(0,s.useLayoutEffect)((()=>{let e=document.querySelector(`#${r}`);if(!e)return;let t=v.current=window.devicePixelRatio||2,l=n*t,s=i*t;e.style.width=`${n}px`,e.style.height=`${i}px`,e.width=l,e.height=s}),[n,i]);let D=()=>{let e=document.querySelector(`#${r}`);if(!e)return;let t=v.current,l=n*t,s=i*t,c=e.getBoundingClientRect();g.current.x=c.x+document.documentElement.scrollLeft,g.current.y=c.y+document.documentElement.scrollTop,g.current.width=c.width,g.current.height=c.height,g.current.ratioWidth=l,g.current.ratioHeight=s};return(0,s.useEffect)((()=>{let e=document.querySelector(`#${r}`),t=e?.getContext("2d",{willReadFrequently:!0});if(!t)return;g.current.context=t,D(),F();let n=j((()=>{(()=>{let{context:e,ratioWidth:t,ratioHeight:r}=g.current;if(!e)return 1;let{data:n}=e.getImageData(0,0,t,r),{length:i}=n,l=0;for(let s=3;s<i;s+=4)0===n[s]&&l++;return l/(i/4)})()>a&&T.current?.()}),300),i=e=>{C.current&&e.preventDefault(),N.current=!0},l=(e,r)=>{let i={x:e,y:r};if(w.current.x){let n=((e,t)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2))(i,w.current);if(n>=5){let l=~~(n/5);if(w.current.x===e){let e=(r-w.current.y)/(l+1),n=w.current.y;for(let r=0;r<l;r++)n+=e,R(t,w.current.x-g.current.x,n-g.current.y)}else{let n=(e-w.current.x)/(l+1),s=w.current.x,c=w.current.y===r;for(let e=1;e<=l;e++)s+=n,R(t,s-g.current.x,c?r-g.current.y:b(s,w.current,i)-g.current.y)}}}w.current={x:e,y:r},R(t,e-g.current.x,r-g.current.y),n()},s=j((e=>{if(!N.current)return;let t=e.changedTouches[0],{pageX:r,pageY:n}=t;l(r,n)}),16),c=j((e=>{if(!N.current)return;let{pageX:t,pageY:r}=e;l(t,r)}),16),o=()=>{N.current=!1,w.current={x:null,y:null}};return e.addEventListener("mousedown",i,{passive:!1}),window.addEventListener("mousemove",c),window.addEventListener("mouseup",o),e.addEventListener("touchstart",i,{passive:!1}),window.addEventListener("touchmove",s),window.addEventListener("touchend",o),()=>{e.removeEventListener("mousedown",i),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o),e.removeEventListener("touchstart",i),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",o)}}),[r]),(0,s.useEffect)((()=>{let e=j((()=>{D()}),16),t=new ResizeObserver(e),n=document.querySelector(`#${r}`);return t.observe(n),window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{t.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}),[r]),(0,s.useImperativeHandle)(t,(()=>({fillArea:F,finishScratching:k,canvasData:g.current}))),s.createElement("canvas",{id:r,width:n,height:i,style:{width:n,height:i,...l},...p})})),N=r(4357);const A=()=>{const[e,t]=(0,s.useState)({available:!0,width:"400",height:"300"}),r=e=>r=>t((t=>({...t,[e]:r}))),n=(0,s.useRef)();return(0,d.jsxs)("div",{className:"flex justify-center gap-20",children:[(0,d.jsxs)("div",{className:"relative overflow-hidden rounded",children:[(0,d.jsx)("div",{className:(0,N.A)("text-primary-50 absolute z-[-1] flex h-full w-full items-center justify-center bg-gradient-to-br text-3xl","from-[#4ADE80] to-[#06B6D4]"),children:"Thanks!"}),(0,d.jsx)(E,{...e,width:+e.width,height:+e.height,ref:n,cover:"img/cover1.png"})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,d.jsx)(v.r,{label:"width",type:"number",value:String(e.width),onValueChange:r("width")}),(0,d.jsx)(v.r,{label:"height",type:"number",value:String(e.height),onValueChange:r("height")}),(0,d.jsx)(g.A,{isSelected:e.available,onValueChange:r("available"),children:"Available"}),(0,d.jsx)(w.T,{onClick:()=>{n.current.finishScratching()},children:"Finish"}),(0,d.jsx)(w.T,{onClick:()=>{n.current.fillArea()},children:"Reset"})]})]})};var C=r(3283);const R=e=>{let{scope:t,code:r}=e;return(0,d.jsxs)(C.Q,{code:r,scope:t,children:[(0,d.jsx)(C.w,{className:"max-w-3/5 min-w-[400px]"}),(0,d.jsx)(C.p1,{}),(0,d.jsx)(C.pA,{})]})},S=()=>{const e=(0,s.useRef)();return(0,d.jsx)("div",{className:"mobile:flex-col flex justify-center gap-4",children:(0,d.jsx)(R,{scope:{ScratchCard:E,Button:w.T,ref:e},code:'\n<div className=\'flex items-center flex-col gap-4\'>\n  <div className="relative overflow-hidden rounded w-[400px]">\n    <div className="text-primary-50 absolute z-[-1] flex h-full w-full items-center justify-center bg-gradient-to-br from-[#4ADE80] to-[#06B6D4] text-3xl">\n      Thanks!\n    </div>\n    <ScratchCard\n      id="usage-demo"\n      width={480}\n      height={270}\n      ref={ref}\n      cover="img/cover2.jpg"\n    />\n  </div>\n  <div className=\'flex gap-4\'>\n    <Button\n      onClick={() => {\n        ref.current.finishScratching();\n      }}\n    >\n      Finish\n    </Button>\n    <Button\n      onClick={() => {\n        ref.current.fillArea();\n      }}\n    >\n      Reset\n    </Button>\n  </div>\n</div>\n'})})};var F=r(8387),L=r(4484),k=r(6362),T=r(6803),D=r(5383),I=r(4542);const O=e=>(0,d.jsx)("code",{className:"rounded-md bg-black/20 px-2 py-1",children:e}),z=()=>{const e=Object.keys(u[0]),t=(e,t)=>{switch(e){case"type":return r(t);case"default":return n(t);default:return t}},r=O,n=e=>null===e?"-":O(e.toString());return(0,d.jsxs)(F.j,{"aria-label":"API Table",fullWidth:!1,children:[(0,d.jsx)(L.X,{children:e.map((e=>(0,d.jsx)(k.e,{className:"capitalize",children:e},e)))}),(0,d.jsx)(T.E,{children:u.map((r=>(0,d.jsx)(D.s,{children:e.map((e=>(0,d.jsx)(I.w,{children:t(e,r[e])},e)))},r.attritube)))})]})};var q=r(9082);const B=e=>{let{children:t}=e;return(0,d.jsx)("div",{className:"container mt-8 flex flex-col px-8",children:t})},$=e=>{let{className:t,children:r,...n}=e;return(0,d.jsx)(i.A,{className:(0,N.A)("mb-8 inline-block text-3xl",t),...n,children:r})};function H(){const{siteConfig:e}=(0,n.A)();return(0,d.jsxs)(l.A,{title:`${e.title}`,description:"scratch,scratch-card,react,reactjs,vanilla,user experience,developer experience,UX,DX",children:[(0,d.jsx)(h,{}),(0,d.jsxs)("main",{children:[(0,d.jsx)(p,{}),(0,d.jsx)("div",{className:"mt-4 flex w-screen flex-col px-8",children:(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,d.jsxs)(B,{children:[(0,d.jsx)($,{id:"experience",href:"#experience",children:"Experience"}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,d.jsx)("p",{className:"text-lg",children:(0,d.jsx)(q.A,{children:"Scratch with your mouse or finger"})}),(0,d.jsx)(A,{})]})]}),(0,d.jsxs)(B,{children:[(0,d.jsx)($,{id:"usage",href:"#usage",children:"Usage"}),(0,d.jsx)(S,{})]}),(0,d.jsxs)(B,{children:[(0,d.jsx)($,{id:"api",href:"#api",children:"API"}),(0,d.jsx)(z,{})]})]})})]})]})}}}]);